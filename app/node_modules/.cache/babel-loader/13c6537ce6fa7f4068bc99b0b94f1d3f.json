{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\alexi\\\\GitHub\\\\sidekick\\\\app\\\\src\\\\components\\\\Commande.jsx\";\nimport React from 'react';\nimport '../css/Style.css';\nimport axios from 'axios';\nimport NavBar from './rfc/NavBar';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup'; // Composants Material-UI\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField'; // Dialog\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle'; // Material-UI Icons\n\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\n/**\r\n * @author Alex Lajeunesse\r\n * @class Commande\r\n * @description Gère la page de commande individuelle (affichage, requêtes à l'API, redirection et suppression)\r\n */\n\nexport default class Commande extends React.Component {\n  /**\r\n   * @author Alex Lajeunesse\r\n   * @constructor de Commande\r\n   * @param {*} props Les propriétés React\r\n   */\n  constructor(props) {\n    super();\n    this.state = {\n      commande: [],\n      produits: [],\n      etats: [],\n      open: false,\n      read: false,\n      done: false\n    };\n    this.id = props.match.params.id;\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleClickOpen = this.handleClickOpen.bind(this);\n    this.handleClickClose = this.handleClickClose.bind(this);\n    this.handleMarkAsRead = this.handleMarkAsRead.bind(this);\n    this.handleMarkAsDone = this.handleMarkAsDone.bind(this);\n    this.schema = Yup.object({\n      qte_recueillie: Yup.number().integer().min(1).required() // eslint-disable-next-line\n      .typeError('Le champs ${path} doit contenir un nombre')\n    });\n  } // Exécuté lorsque le composant est appelé\n\n\n  componentDidMount() {\n    this.getCommande();\n    this.getProduits();\n    this.getEtats();\n  } // Lorsque ses valeurs sont changées avec setState, un nouveau rendu est appelé\n\n\n  // Gestion de l'icône de modification\n  handleEdit(event) {\n    event.preventDefault();\n    console.log(\"1\");\n  } // Gestion du bouton \"Oui\" d'Alert de suppression\n\n\n  async handleDelete(event) {\n    event.preventDefault();\n\n    try {\n      const response = await axios.delete(`http://localhost:5000/api/commandes/${this.id}`);\n      console.log(response);\n      this.setState({\n        open: false\n      });\n      window.location.replace(\"/\");\n    } catch (error) {\n      console.error(error);\n    }\n  } // Gestion de l'icône de suppression\n\n\n  handleClickOpen() {\n    this.setState({\n      open: true\n    });\n  }\n\n  // Gestion du bouton de fermeture d'Alert de suppression\n  handleClickClose() {\n    this.setState({\n      open: false\n    });\n  }\n\n  // Gestion du bouton \"Marquer comme lu\"\n  async handleMarkAsRead() {\n    // Ajouter un état \"Lue\" lié à la commande\n    try {\n      const response = await axios.post(`http://localhost:5000/api/etats/create/${this.id}`, {\n        texte: \"lue\"\n      }); // Succès\n\n      console.log(response);\n      window.location.replace(\"/\"); // Erreur\n    } catch (error) {\n      console.error(error);\n    }\n  } // Gestion du bouton \"Marquer comme complétée\"\n\n\n  async handleMarkAsDone() {\n    // Ajouter un état \"Lue\" lié à la commande\n    try {\n      const response = await axios.post(`http://localhost:5000/api/etats/create/${this.id}`, {\n        texte: \"complétée\"\n      }); // Succès\n\n      console.log(response);\n      window.location.replace(\"/\"); // Erreur\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  /**\r\n  * @author Alex Lajeunesse\r\n  * @function getCommande\r\n  * @description Effectue une requête à l'api pour retrouver la commande appropriée\r\n  */\n\n\n  async getCommande() {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/commandes/${this.id}`);\n      console.log(response); // La réponse de l'API est enregistré dans le state\n\n      this.setState({\n        commande: response.data\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  /**\r\n  * @author Alex Lajeunesse\r\n  * @function getProduits\r\n  * @description Effectue une requête à l'api pour retrouver tous les produits de la commande\r\n  */\n\n\n  async getProduits() {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/produits/${this.id}`);\n      console.log(response); // La réponse de l'API est enregistré dans le state\n\n      this.setState({\n        produits: response.data\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  /**\r\n  * @author Alex Lajeunesse\r\n  * @function getEtats\r\n  * @description Effectue une requête à l'api pour retrouver tous les états de la commande\r\n  */\n\n\n  async getEtats() {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/etats/${this.id}`);\n      console.log(response); // La réponse de l'API est enregistré dans le state\n\n      response.data.forEach(etat => {\n        if (etat.texte === \"lue\") {\n          this.setState({\n            read: true\n          });\n        }\n\n        if (etat.texte === \"complétée\") {\n          this.setState({\n            done: true\n          });\n        }\n      });\n      this.setState({\n        etats: response.data\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Dialog, {\n            open: this.state.open,\n            onClose: this.handleClickClose,\n            \"aria-labelledby\": \"alert-dialog-title\",\n            \"aria-describedby\": \"alert-dialog-description\",\n            children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n              id: \"alert-dialog-title\",\n              children: \"Supprimer la commande ?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n              children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n                id: \"alert-dialog-description\",\n                children: \"Souhaitez-vous vraiment supprimer la commande d\\xE9fintivement ? Ceci inclut tous les produits et les \\xE9tats associ\\xE9s.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: this.handleClickClose,\n                color: \"primary\",\n                children: \"Annuler\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: this.handleDelete,\n                color: \"primary\",\n                autoFocus: true,\n                children: \"Oui\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"D\\xE9tails de la commande no. \", this.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n          component: Paper,\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            className: \"table\",\n            \"aria-label\": \"simple table\",\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Entreprise\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Nom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"PO du client\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Vendeur\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Date de modification\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Date de cr\\xE9ation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: this.state.commande.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                    edge: \"start\",\n                    className: \"tab-icons\",\n                    color: \"inherit\",\n                    \"aria-label\": \"menu\",\n                    onClick: this.handleEdit,\n                    children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                    edge: \"start\",\n                    className: \"tab-icons\",\n                    color: \"inherit\",\n                    \"aria-label\": \"menu\",\n                    onClick: this.handleClickOpen,\n                    children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.entreprise || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.nom\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.po || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.vendeur\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.date_modification || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.date_creation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 41\n                }, this)]\n              }, row.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this), this.state.commande.map(row => row.commentaire ? /*#__PURE__*/_jsxDEV(Paper, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"comments-title\",\n            children: \"commentaire\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comments-text\",\n            children: row.commentaire\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 29\n          }, this)]\n        }, row.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 43\n        }, this) : \"\"), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Produits\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n          component: Paper,\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            className: \"table\",\n            \"aria-label\": \"simple table\",\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Quantit\\xE9 demand\\xE9e\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Quantit\\xE9 recueillie\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Prix\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: this.state.produits.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsxDEV(Formik, {\n                    validateOnChange: true,\n                    initialValues: {\n                      qte_recueillie: row.qte_recueillie\n                    },\n                    onSubmit: async (data, {\n                      setSubmitting\n                    }) => {\n                      // Désactive le champs \"qte_recueillie\"\n                      setSubmitting(true);\n                      console.log(data);\n\n                      try {\n                        // Modification de la quantité recueillie\n                        const qtyResponse = await axios.put(`http://localhost:5000/api/produits/${row.id}`, {\n                          qte_recueillie: data.qte_recueillie\n                        }); // Succès\n\n                        console.log(qtyResponse);\n                        setSubmitting(false); // Erreur\n                      } catch (error) {\n                        console.log(error);\n                      }\n                    },\n                    validationSchema: this.schema,\n                    children: /*#__PURE__*/_jsxDEV(Form, {\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        label: \"Quantit\\xE9 recueillie\",\n                        name: \"qte_recueillie\",\n                        type: \"number\",\n                        disabled: this.state.isSubmitting\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 321,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 320,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.qte_demandee\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.qte_recueillie || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.code || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.description || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: row.prix ? row.prix + \"$\" : \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 41\n                }, this)]\n              }, row.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Liste des \\xE9tats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n          component: Paper,\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            className: \"table\",\n            \"aria-label\": \"simple table\",\n            children: /*#__PURE__*/_jsxDEV(TableBody, {\n              children: this.state.etats.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n                children: /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: [row.texte, \" le \", row.date]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 41\n                }, this)\n              }, row.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          className: \"paper-button\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: \"form-button\",\n              disabled: this.state.read || this.state.done,\n              onClick: this.handleMarkAsRead,\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Marquer comme lue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 139\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"form-button\",\n              disabled: this.state.done,\n              onClick: this.handleMarkAsDone,\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Terminer la commande\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 120\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/alexi/GitHub/sidekick/app/src/components/Commande.jsx"],"names":["React","axios","NavBar","Formik","Form","Yup","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","IconButton","TextField","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","EditIcon","DeleteIcon","Commande","Component","constructor","props","state","commande","produits","etats","open","read","done","id","match","params","handleEdit","bind","handleDelete","handleClickOpen","handleClickClose","handleMarkAsRead","handleMarkAsDone","schema","object","qte_recueillie","number","integer","min","required","typeError","componentDidMount","getCommande","getProduits","getEtats","event","preventDefault","console","log","response","delete","setState","window","location","replace","error","post","texte","get","data","forEach","etat","render","map","row","entreprise","nom","po","vendeur","date_modification","date_creation","commentaire","setSubmitting","qtyResponse","put","isSubmitting","qte_demandee","code","description","prix","date"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport '../css/Style.css';\r\nimport axios from 'axios';\r\nimport NavBar from './rfc/NavBar';\r\nimport { Formik, Form } from 'formik';\r\nimport * as Yup from 'yup';\r\n// Composants Material-UI\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\n// Dialog\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n// Material-UI Icons\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\n/**\r\n * @author Alex Lajeunesse\r\n * @class Commande\r\n * @description Gère la page de commande individuelle (affichage, requêtes à l'API, redirection et suppression)\r\n */\r\nexport default class Commande extends React.Component {\r\n\r\n    /**\r\n     * @author Alex Lajeunesse\r\n     * @constructor de Commande\r\n     * @param {*} props Les propriétés React\r\n     */\r\n    constructor(props) {\r\n        super();\r\n        this.id = props.match.params.id;\r\n        this.handleEdit = this.handleEdit.bind(this);\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n        this.handleClickOpen = this.handleClickOpen.bind(this);\r\n        this.handleClickClose = this.handleClickClose.bind(this);\r\n        this.handleMarkAsRead = this.handleMarkAsRead.bind(this);\r\n        this.handleMarkAsDone = this.handleMarkAsDone.bind(this);\r\n\r\n        this.schema = Yup.object({\r\n            qte_recueillie: Yup.number()\r\n                .integer()\r\n                .min(1)\r\n                .required()\r\n                // eslint-disable-next-line\r\n                .typeError('Le champs ${path} doit contenir un nombre'),\r\n        });\r\n    }\r\n\r\n    // Exécuté lorsque le composant est appelé\r\n    componentDidMount() {\r\n        this.getCommande();\r\n        this.getProduits();\r\n        this.getEtats();\r\n    }\r\n\r\n    // Lorsque ses valeurs sont changées avec setState, un nouveau rendu est appelé\r\n    state = {\r\n        commande: [],\r\n        produits: [],\r\n        etats: [],\r\n        open: false,\r\n        read: false,\r\n        done: false,\r\n    }\r\n\r\n    // Gestion de l'icône de modification\r\n    handleEdit(event) {\r\n        event.preventDefault();\r\n        console.log(\"1\");\r\n    }\r\n\r\n    // Gestion du bouton \"Oui\" d'Alert de suppression\r\n    async handleDelete(event) {\r\n        event.preventDefault();\r\n        try {\r\n            const response = await axios.delete(`http://localhost:5000/api/commandes/${this.id}`);\r\n            console.log(response);\r\n            this.setState({\r\n                open: false\r\n            });\r\n            window.location.replace(\"/\");\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    // Gestion de l'icône de suppression\r\n    handleClickOpen() {\r\n        this.setState({\r\n            open: true\r\n        });\r\n    };\r\n\r\n    // Gestion du bouton de fermeture d'Alert de suppression\r\n    handleClickClose() {\r\n        this.setState({\r\n            open: false\r\n        });\r\n    };\r\n\r\n    // Gestion du bouton \"Marquer comme lu\"\r\n    async handleMarkAsRead() {\r\n        // Ajouter un état \"Lue\" lié à la commande\r\n        try {\r\n            const response = await axios.post(`http://localhost:5000/api/etats/create/${this.id}`, {\r\n                texte: \"lue\",\r\n            });\r\n            // Succès\r\n            console.log(response);\r\n            window.location.replace(\"/\");\r\n            // Erreur\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    // Gestion du bouton \"Marquer comme complétée\"\r\n    async handleMarkAsDone() {\r\n        // Ajouter un état \"Lue\" lié à la commande\r\n        try {\r\n            const response = await axios.post(`http://localhost:5000/api/etats/create/${this.id}`, {\r\n                texte: \"complétée\",\r\n            });\r\n            // Succès\r\n            console.log(response);\r\n            window.location.replace(\"/\");\r\n            // Erreur\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @author Alex Lajeunesse\r\n    * @function getCommande\r\n    * @description Effectue une requête à l'api pour retrouver la commande appropriée\r\n    */\r\n    async getCommande() {\r\n        try {\r\n            const response = await axios.get(`http://localhost:5000/api/commandes/${this.id}`);\r\n            console.log(response);\r\n            // La réponse de l'API est enregistré dans le state\r\n            this.setState({\r\n                commande: response.data\r\n            });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @author Alex Lajeunesse\r\n    * @function getProduits\r\n    * @description Effectue une requête à l'api pour retrouver tous les produits de la commande\r\n    */\r\n    async getProduits() {\r\n        try {\r\n            const response = await axios.get(`http://localhost:5000/api/produits/${this.id}`);\r\n            console.log(response);\r\n            // La réponse de l'API est enregistré dans le state\r\n            this.setState({\r\n                produits: response.data\r\n            });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @author Alex Lajeunesse\r\n    * @function getEtats\r\n    * @description Effectue une requête à l'api pour retrouver tous les états de la commande\r\n    */\r\n    async getEtats() {\r\n        try {\r\n            const response = await axios.get(`http://localhost:5000/api/etats/${this.id}`);\r\n            console.log(response);\r\n            // La réponse de l'API est enregistré dans le state\r\n            response.data.forEach(etat => {\r\n                if (etat.texte === \"lue\") {\r\n                    this.setState({\r\n                        read: true,\r\n                    });\r\n                }\r\n                if (etat.texte === \"complétée\") {\r\n                    this.setState({\r\n                        done: true,\r\n                    });\r\n                }\r\n            });\r\n            this.setState({\r\n                etats: response.data\r\n            });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <header>\r\n                    <NavBar />\r\n                </header>\r\n                <div className=\"content\">\r\n                    <div>\r\n                        <Dialog\r\n                            open={this.state.open}\r\n                            onClose={this.handleClickClose}\r\n                            aria-labelledby=\"alert-dialog-title\"\r\n                            aria-describedby=\"alert-dialog-description\">\r\n                            <DialogTitle id=\"alert-dialog-title\">{\"Supprimer la commande ?\"}</DialogTitle>\r\n                            <DialogContent>\r\n                                <DialogContentText id=\"alert-dialog-description\">\r\n                                    Souhaitez-vous vraiment supprimer la commande défintivement ? Ceci inclut tous les produits et les états associés.</DialogContentText>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button onClick={this.handleClickClose} color=\"primary\">Annuler</Button>\r\n                                <Button onClick={this.handleDelete} color=\"primary\" autoFocus>Oui</Button>\r\n                            </DialogActions>\r\n                        </Dialog>\r\n                    </div>\r\n                    <h1>Détails de la commande no. {this.id}</h1>\r\n                    <TableContainer component={Paper}>\r\n                        <Table className=\"table\" aria-label=\"simple table\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell align=\"center\"></TableCell>\r\n                                    <TableCell align=\"center\">Entreprise</TableCell>\r\n                                    <TableCell align=\"center\">Nom</TableCell>\r\n                                    <TableCell align=\"center\">PO du client</TableCell>\r\n                                    <TableCell align=\"center\">Vendeur</TableCell>\r\n                                    <TableCell align=\"center\">Date de modification</TableCell>\r\n                                    <TableCell align=\"center\">Date de création</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {this.state.commande.map((row) => (\r\n                                    <TableRow key={row.id}>\r\n                                        <TableCell align=\"center\">\r\n                                            <IconButton edge=\"start\" className=\"tab-icons\" color=\"inherit\" aria-label=\"menu\" onClick={this.handleEdit}>\r\n                                                <EditIcon />\r\n                                            </IconButton>\r\n                                            <IconButton edge=\"start\" className=\"tab-icons\" color=\"inherit\" aria-label=\"menu\" onClick={this.handleClickOpen}>\r\n                                                <DeleteIcon />\r\n                                            </IconButton>\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">{row.entreprise || \"-\"}</TableCell>\r\n                                        <TableCell align=\"center\">{row.nom}</TableCell>\r\n                                        <TableCell align=\"center\">{row.po || \"-\"}</TableCell>\r\n                                        <TableCell align=\"center\">{row.vendeur}</TableCell>\r\n                                        <TableCell align=\"center\">{row.date_modification || \"-\"}</TableCell>\r\n                                        <TableCell align=\"center\">{row.date_creation}</TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                    {this.state.commande.map((row) => (\r\n                        row.commentaire ? <Paper key={row.id}>\r\n                            <h3 className=\"comments-title\">commentaire</h3>\r\n                            <div className=\"comments-text\">{row.commentaire}</div>\r\n                        </Paper> : \"\"\r\n                    ))}\r\n                    <h1>Produits</h1>\r\n                    <TableContainer component={Paper}>\r\n                        <Table className=\"table\" aria-label=\"simple table\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell align=\"center\"></TableCell>\r\n                                    <TableCell align=\"center\">Quantité demandée</TableCell>\r\n                                    <TableCell align=\"center\">Quantité recueillie</TableCell>\r\n                                    <TableCell align=\"center\"></TableCell>\r\n                                    <TableCell align=\"center\">Code</TableCell>\r\n                                    <TableCell align=\"center\">Description</TableCell>\r\n                                    <TableCell align=\"center\">Prix</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {/* Lignes de produits dans le tableau */}\r\n                                {this.state.produits.map((row) => (\r\n                                    <TableRow key={row.id}>\r\n                                        <TableCell align=\"center\">\r\n                                            {/* Formulaire pour la quantité recueillie */}\r\n                                            <Formik\r\n                                                validateOnChange\r\n                                                initialValues={{\r\n                                                    qte_recueillie: row.qte_recueillie,\r\n                                                }}\r\n                                                onSubmit={async (data, { setSubmitting }) => {\r\n                                                    // Désactive le champs \"qte_recueillie\"\r\n                                                    setSubmitting(true);\r\n                                                    console.log(data);\r\n                                                    try {\r\n                                                        // Modification de la quantité recueillie\r\n                                                        const qtyResponse = await axios.put(`http://localhost:5000/api/produits/${row.id}`, {\r\n                                                            qte_recueillie: data.qte_recueillie,\r\n                                                        });\r\n                                                        // Succès\r\n                                                        console.log(qtyResponse);\r\n                                                        setSubmitting(false);\r\n                                                        // Erreur\r\n                                                    } catch (error) {\r\n                                                        console.log(error);\r\n                                                    }\r\n                                                }}\r\n                                                validationSchema={this.schema}\r\n                                            >\r\n                                                <Form>\r\n                                                    <TextField\r\n                                                        label=\"Quantité recueillie\"\r\n                                                        name=\"qte_recueillie\"\r\n                                                        type=\"number\"\r\n                                                        disabled={this.state.isSubmitting}\r\n                                                    />\r\n                                                </Form>\r\n                                            </Formik>\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">{row.qte_demandee}</TableCell>\r\n                                        <TableCell align=\"center\">{row.qte_recueillie || 0}</TableCell>\r\n                                        <TableCell align=\"center\"></TableCell>\r\n                                        <TableCell align=\"center\">{row.code || \"-\"}</TableCell>\r\n                                        <TableCell align=\"center\">{row.description || \"-\"}</TableCell>\r\n                                        <TableCell align=\"center\">{row.prix ? row.prix + \"$\" : \"-\"}</TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                    <h1>Liste des états</h1>\r\n                    <TableContainer component={Paper}>\r\n                        <Table className=\"table\" aria-label=\"simple table\">\r\n                            <TableBody>\r\n                                {this.state.etats.map((row) => (\r\n                                    <TableRow key={row.id}>\r\n                                        <TableCell align=\"center\">{row.texte} le {row.date}</TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                    <Paper className=\"paper-button\">\r\n                        <div>\r\n                            <Button className=\"form-button\" disabled={this.state.read || this.state.done} onClick={this.handleMarkAsRead}><b>Marquer comme lue</b></Button>\r\n                            <Button className=\"form-button\" disabled={this.state.done} onClick={this.handleMarkAsDone}><b>Terminer la commande</b></Button>\r\n                        </div>\r\n                    </Paper>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}