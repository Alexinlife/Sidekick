{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\alexi\\\\GitHub\\\\sidekick\\\\app\\\\src\\\\components\\\\CreationCommande.jsx\";\nimport React from 'react';\nimport '../css/Style.css';\nimport axios from 'axios';\nimport NavBar from './rfc/NavBar';\nimport CreationProduits from './rfc/CreationProduits';\nimport { Formik, Form, useField, Field } from 'formik';\nimport * as Yup from 'yup'; // Composants Material-UI\n\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport Button from '@material-ui/core/Button';\nimport { MenuItem } from '@material-ui/core'; // Dialog\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n/**\r\n * @author Alex Lajeunesse\r\n * @class CreationCommande\r\n * @description Gère la page de création et de modification de commandes (affichage, requêtes à l'API, redirection et formulaires)\r\n */\n\nexport default class CreationCommande extends React.Component {\n  /**\r\n   * @author Alex Lajeunesse\r\n   * @constructor de CreationCommande\r\n   * @param {*} props Les propriétés React\r\n   */\n  constructor(props) {\n    super();\n    this.state = {\n      open: false\n    };\n    this.handleClickOpen = this.handleClickOpen.bind(this);\n    this.handleClickClose = this.handleClickClose.bind(this); // Localisation en français\n\n    Yup.setLocale({\n      mixed: {\n        // eslint-disable-next-line\n        default: 'Champ ${path} invalide',\n        // eslint-disable-next-line\n        required: 'Le champ ${path} est obligatoire'\n      },\n      string: {\n        // eslint-disable-next-line\n        max: 'Le champ ${path} doit contenir un maximum de ${max} caractères',\n        // eslint-disable-next-line\n        email: 'L\\'adresse courriel doit être valide'\n      },\n      number: {\n        // eslint-disable-next-line\n        max: 'Le champ ${path} doit avoir un nombre inférieur à ${max}'\n      }\n    }); // Schéma de validation Yup\n\n    this.schema = Yup.object({\n      entreprise: Yup.string().max(64)\n      /**\r\n       * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n       */\n      .test('ouInclusifEntrNom', // test name\n      'Au moins l\\'un des champs entreprise et nom doit être rempli', // validation message to the user\n      // it has to be function definition to use 'this'\n      function (entreprise) {\n        const {\n          nom\n        } = this.parent;\n\n        if (entreprise || nom) {\n          return true; // lorsqu'il y a au moins un champs de rempli\n        }\n\n        return false;\n      }).test('ouInclusifEntrTelCourriel', // test name\n      'Le client n\\'a présentement aucune information de contact', // validation message to the user\n      // it has to be function definition to use 'this'\n      function (entreprise) {\n        const {\n          telephone,\n          courriel\n        } = this.parent;\n\n        if (entreprise || telephone || courriel) {\n          return true; // lorsqu'il y a au moins un champs de rempli\n        }\n\n        return false;\n      }),\n      nom: Yup.string().max(64)\n      /**\r\n       * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n       */\n      .test('ouInclusifEntrNom', // test name\n      'Au moins l\\'un des champs entreprise et nom doit être rempli', // validation message to the user\n      // it has to be function definition to use 'this'\n      function (nom) {\n        const {\n          entreprise\n        } = this.parent;\n\n        if (entreprise || nom) {\n          return true; // lorsqu'il y a au moins un champs de rempli\n        }\n\n        return false;\n      }),\n      no_compte: Yup.number().max(169999999) // eslint-disable-next-line\n      .typeError('Le champs ${path} doit contenir un nombre'),\n      telephone: Yup.string().max(32)\n      /**\r\n       * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n       */\n      .test('ouInclusifEntrTelCourriel', // test name\n      'Le client n\\'a présentement aucune information de contact', // validation message to the user\n      // it has to be function definition to use 'this'\n      function (telephone) {\n        const {\n          entreprise,\n          courriel\n        } = this.parent;\n\n        if (entreprise || telephone || courriel) {\n          return true; // lorsqu'il y a au moins un champs de rempli\n        }\n\n        return false;\n      }),\n      courriel: Yup.string().email().max(255)\n      /**\r\n       * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n       */\n      .test('ouInclusifEntrTelCourriel', // test name\n      'Le client n\\'a présentement aucune information de contact', // validation message to the user\n      // it has to be function definition to use 'this'\n      function (courriel) {\n        const {\n          entreprise,\n          telephone\n        } = this.parent;\n\n        if (entreprise || telephone || courriel) {\n          return true; // lorsqu'il y a au moins un champs de rempli\n        }\n\n        return false;\n      }),\n      po_client: Yup.string().max(64),\n      vendeur: Yup.string().max(4).required(),\n      commentaire: Yup.string().max(512),\n      // Présentement inutile avec le select mis en place\n      attention: Yup.string().email().max(255).required()\n    });\n  }\n\n  // Lorsque l'utilisateur clique sur l'icône de suppression\n  handleClickOpen() {\n    this.setState({\n      open: true\n    });\n  }\n\n  // Lorsque l'utilisateur ferme l'Alert de suppression\n  handleClickClose() {\n    this.setState({\n      open: false\n    });\n  }\n\n  /**\r\n   * @author Alex Lajeunesse\r\n   * @function render\r\n   * @description Affiche l'interface.\r\n   * @see https://www.youtube.com/watch?v=FD50LPJ6bjE pour Formik et MyTextField\r\n   * @see https://formik.org/docs/examples/field-arrays pour les produits\r\n   */\n  render() {\n    var _s = $RefreshSig$();\n\n    const MyTextField = ({\n      placeholder,\n      ...props\n    }) => {\n      _s();\n\n      const [field, meta] = useField(props); // Erreur si un champ a été touché et que la validation a échoué\n\n      const error = meta.error && meta.touched ? meta.error : ''; // Format de base pour MyTextField\n\n      return /*#__PURE__*/_jsxDEV(TextField, {\n        className: \"form-item\",\n        placeholder: placeholder,\n        ...field,\n        helperText: error,\n        error: !!error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this);\n    };\n\n    _s(MyTextField, \"ImX69+3rRx1BE5Ru6eNKPZVOEn4=\", false, function () {\n      return [useField];\n    });\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Dialog, {\n            open: this.state.open,\n            onClose: this.handleClickClose,\n            \"aria-labelledby\": \"alert-dialog-title\",\n            \"aria-describedby\": \"alert-dialog-description\",\n            children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n              id: \"alert-dialog-title\",\n              children: \"Supprimer la commande ?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n              children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n                id: \"alert-dialog-description\",\n                children: \"Souhaitez-vous vraiment supprimer la commande d\\xE9fintivement ? Ceci inclut tous les produits et les \\xE9tats associ\\xE9s.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: this.handleClickClose,\n                color: \"primary\",\n                children: \"Ok\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Cr\\xE9er une commande\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          validateOnChange: true,\n          initialValues: {\n            entreprise: '',\n            nom: '',\n            no_compte: null,\n            telephone: '',\n            courriel: '',\n            po_client: '',\n            vendeur: '',\n            commentaire: '',\n            attention: ''\n          },\n          onSubmit: async (data, {\n            setSubmitting\n          }) => {\n            // Désactive le bouton \"Enregistrer\"\n            setSubmitting(true);\n            console.log(data); // Envoie des informations à l'API\n\n            try {\n              const response = await axios.post('http://localhost:5000/api/commandes/create', {\n                entreprise: data.entreprise,\n                nom: data.nom,\n                no_compte: data.no_compte,\n                telephone: data.telephone,\n                courriel: data.courriel,\n                po_client: data.po_client,\n                vendeur: data.vendeur,\n                commentaire: data.commentaire,\n                attention: data.attention\n              }); // Succès\n\n              console.log(response); // Ouvre le popup d'information\n\n              this.handleClickOpen(); // Erreur\n            } catch (error) {\n              console.log(error);\n            } // Réactive le bouton \"Enregistrer\"\n\n\n            setSubmitting(false);\n          },\n          validationSchema: this.schema,\n          children: ({\n            values,\n            isSubmitting,\n            handleChange,\n            handleBlur,\n            handleSubmit\n          }) => /*#__PURE__*/_jsxDEV(Form, {\n            children: /*#__PURE__*/_jsxDEV(Paper, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"Nom d'entreprise\",\n                  name: \"entreprise\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"Num\\xE9ro de compte\",\n                  name: \"no_compte\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"Nom du client\",\n                  name: \"nom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"T\\xE9l\\xE9phone\",\n                  name: \"telephone\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"Courriel\",\n                  name: \"courriel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"PO du client\",\n                  name: \"po_client\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"*Vendeur\",\n                  name: \"vendeur\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                  className: \"form-item\",\n                  children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                    htmlFor: \"attention\",\n                    children: \"*Attention\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    type: \"select\",\n                    as: Select,\n                    name: \"attention\",\n                    children: /*#__PURE__*/_jsxDEV(MenuItem, {\n                      value: 'alexinlife.exe@gmail.com',\n                      children: \"Alex Lajeunesse\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(MyTextField, {\n                  placeholder: \"Commentaire\",\n                  name: \"commentaire\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"form-item\",\n                  disabled: isSubmitting,\n                  type: \"submit\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Enregistrer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 109\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CreationProduits, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/alexi/GitHub/sidekick/app/src/components/CreationCommande.jsx"],"names":["React","axios","NavBar","CreationProduits","Formik","Form","useField","Field","Yup","Paper","TextField","FormControl","InputLabel","Select","Button","MenuItem","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","CreationCommande","Component","constructor","props","state","open","handleClickOpen","bind","handleClickClose","setLocale","mixed","default","required","string","max","email","number","schema","object","entreprise","test","nom","parent","telephone","courriel","no_compte","typeError","po_client","vendeur","commentaire","attention","setState","render","MyTextField","placeholder","field","meta","error","touched","data","setSubmitting","console","log","response","post","values","isSubmitting","handleChange","handleBlur","handleSubmit"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport '../css/Style.css';\r\nimport axios from 'axios';\r\nimport NavBar from './rfc/NavBar';\r\nimport CreationProduits from './rfc/CreationProduits';\r\nimport { Formik, Form, useField, Field } from 'formik';\r\nimport * as Yup from 'yup';\r\n// Composants Material-UI\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport Button from '@material-ui/core/Button';\r\nimport { MenuItem } from '@material-ui/core';\r\n// Dialog\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\n/**\r\n * @author Alex Lajeunesse\r\n * @class CreationCommande\r\n * @description Gère la page de création et de modification de commandes (affichage, requêtes à l'API, redirection et formulaires)\r\n */\r\nexport default class CreationCommande extends React.Component {\r\n\r\n    /**\r\n     * @author Alex Lajeunesse\r\n     * @constructor de CreationCommande\r\n     * @param {*} props Les propriétés React\r\n     */\r\n    constructor(props) {\r\n        super();\r\n\r\n        this.handleClickOpen = this.handleClickOpen.bind(this);\r\n        this.handleClickClose = this.handleClickClose.bind(this);\r\n\r\n        // Localisation en français\r\n        Yup.setLocale({\r\n            mixed: {\r\n                // eslint-disable-next-line\r\n                default: 'Champ ${path} invalide',\r\n                // eslint-disable-next-line\r\n                required: 'Le champ ${path} est obligatoire'\r\n            },\r\n            string: {\r\n                // eslint-disable-next-line\r\n                max: 'Le champ ${path} doit contenir un maximum de ${max} caractères',\r\n                // eslint-disable-next-line\r\n                email: 'L\\'adresse courriel doit être valide'\r\n            },\r\n            number: {\r\n                // eslint-disable-next-line\r\n                max: 'Le champ ${path} doit avoir un nombre inférieur à ${max}'\r\n            }\r\n        });\r\n\r\n        // Schéma de validation Yup\r\n        this.schema = Yup.object({\r\n            entreprise: Yup.string()\r\n                .max(64)\r\n                /**\r\n                 * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n                 */\r\n                .test(\r\n                    'ouInclusifEntrNom', // test name\r\n                    'Au moins l\\'un des champs entreprise et nom doit être rempli', // validation message to the user\r\n                    // it has to be function definition to use 'this'\r\n                    function (entreprise) {\r\n                        const { nom } = this.parent;\r\n                        if (entreprise || nom) {\r\n                            return true; // lorsqu'il y a au moins un champs de rempli\r\n                        }\r\n                        return false;\r\n                    }\r\n                )\r\n                .test(\r\n                    'ouInclusifEntrTelCourriel', // test name\r\n                    'Le client n\\'a présentement aucune information de contact', // validation message to the user\r\n                    // it has to be function definition to use 'this'\r\n                    function (entreprise) {\r\n                        const { telephone, courriel } = this.parent;\r\n                        if (entreprise || telephone || courriel) {\r\n                            return true; // lorsqu'il y a au moins un champs de rempli\r\n                        }\r\n                        return false;\r\n                    }\r\n                ),\r\n\r\n            nom: Yup.string()\r\n                .max(64)\r\n                /**\r\n                 * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n                 */\r\n                .test(\r\n                    'ouInclusifEntrNom', // test name\r\n                    'Au moins l\\'un des champs entreprise et nom doit être rempli', // validation message to the user\r\n                    // it has to be function definition to use 'this'\r\n                    function (nom) {\r\n                        const { entreprise } = this.parent;\r\n                        if (entreprise || nom) {\r\n                            return true; // lorsqu'il y a au moins un champs de rempli\r\n                        }\r\n                        return false;\r\n                    }\r\n                ),\r\n\r\n            no_compte: Yup.number()\r\n                .max(169999999)\r\n                // eslint-disable-next-line\r\n                .typeError('Le champs ${path} doit contenir un nombre'),\r\n\r\n            telephone: Yup.string()\r\n                .max(32)\r\n                /**\r\n                 * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n                 */\r\n                .test(\r\n                    'ouInclusifEntrTelCourriel', // test name\r\n                    'Le client n\\'a présentement aucune information de contact', // validation message to the user\r\n                    // it has to be function definition to use 'this'\r\n                    function (telephone) {\r\n                        const { entreprise, courriel } = this.parent;\r\n                        if (entreprise || telephone || courriel) {\r\n                            return true; // lorsqu'il y a au moins un champs de rempli\r\n                        }\r\n                        return false;\r\n                    }\r\n                ),\r\n\r\n            courriel: Yup.string()\r\n                .email()\r\n                .max(255)\r\n                /**\r\n                 * @see https://krzysztofzuraw.com/blog/2020/yup-validation-two-fields\r\n                 */\r\n                .test(\r\n                    'ouInclusifEntrTelCourriel', // test name\r\n                    'Le client n\\'a présentement aucune information de contact', // validation message to the user\r\n                    // it has to be function definition to use 'this'\r\n                    function (courriel) {\r\n                        const { entreprise, telephone } = this.parent;\r\n                        if (entreprise || telephone || courriel) {\r\n                            return true; // lorsqu'il y a au moins un champs de rempli\r\n                        }\r\n                        return false;\r\n                    }\r\n                ),\r\n\r\n            po_client: Yup.string()\r\n                .max(64),\r\n\r\n            vendeur: Yup.string()\r\n                .max(4)\r\n                .required(),\r\n\r\n            commentaire: Yup.string()\r\n                .max(512),\r\n\r\n            // Présentement inutile avec le select mis en place\r\n            attention: Yup.string()\r\n                .email()\r\n                .max(255)\r\n                .required(),\r\n        });\r\n    }\r\n\r\n    state = {\r\n        open: false\r\n    }\r\n\r\n    // Lorsque l'utilisateur clique sur l'icône de suppression\r\n    handleClickOpen() {\r\n        this.setState({\r\n            open: true\r\n        });\r\n    };\r\n\r\n    // Lorsque l'utilisateur ferme l'Alert de suppression\r\n    handleClickClose() {\r\n        this.setState({\r\n            open: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @author Alex Lajeunesse\r\n     * @function render\r\n     * @description Affiche l'interface.\r\n     * @see https://www.youtube.com/watch?v=FD50LPJ6bjE pour Formik et MyTextField\r\n     * @see https://formik.org/docs/examples/field-arrays pour les produits\r\n     */\r\n    render() {\r\n        const MyTextField = ({ placeholder, ...props }) => {\r\n            const [field, meta] = useField(props);\r\n            // Erreur si un champ a été touché et que la validation a échoué\r\n            const error = meta.error && meta.touched ? meta.error : '';\r\n            // Format de base pour MyTextField\r\n            return (\r\n                <TextField\r\n                    className=\"form-item\"\r\n                    placeholder={placeholder}\r\n                    {...field}\r\n                    helperText={error}\r\n                    error={!!error}\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <div>\r\n                <header>\r\n                    <NavBar />\r\n                </header>\r\n                <div className=\"content\">\r\n                    <div>\r\n                        <Dialog\r\n                            open={this.state.open}\r\n                            onClose={this.handleClickClose}\r\n                            aria-labelledby=\"alert-dialog-title\"\r\n                            aria-describedby=\"alert-dialog-description\">\r\n                            <DialogTitle id=\"alert-dialog-title\">{\"Supprimer la commande ?\"}</DialogTitle>\r\n                            <DialogContent>\r\n                                <DialogContentText id=\"alert-dialog-description\">\r\n                                    Souhaitez-vous vraiment supprimer la commande défintivement ? Ceci inclut tous les produits et les états associés.</DialogContentText>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button onClick={this.handleClickClose} color=\"primary\">Ok</Button>\r\n                            </DialogActions>\r\n                        </Dialog>\r\n                    </div>\r\n                    <h1>Créer une commande</h1>\r\n                    <Formik\r\n                        validateOnChange\r\n                        initialValues={{ entreprise: '', nom: '', no_compte: null, telephone: '', courriel: '', po_client: '', vendeur: '', commentaire: '', attention: '' }}\r\n                        onSubmit={ async (data, { setSubmitting }) => {\r\n                            // Désactive le bouton \"Enregistrer\"\r\n                            setSubmitting(true);\r\n                            console.log(data);\r\n                            // Envoie des informations à l'API\r\n                            try {\r\n                                const response = await axios.post('http://localhost:5000/api/commandes/create', {\r\n                                    entreprise: data.entreprise,\r\n                                    nom: data.nom,\r\n                                    no_compte: data.no_compte,\r\n                                    telephone: data.telephone,\r\n                                    courriel: data.courriel,\r\n                                    po_client: data.po_client,\r\n                                    vendeur: data.vendeur,\r\n                                    commentaire: data.commentaire,\r\n                                    attention: data.attention\r\n                                });\r\n                                // Succès\r\n                                console.log(response);\r\n                                // Ouvre le popup d'information\r\n                                this.handleClickOpen();\r\n                                // Erreur\r\n                            } catch (error) {\r\n                                console.log(error);\r\n                            }\r\n\r\n                            // Réactive le bouton \"Enregistrer\"\r\n                            setSubmitting(false);\r\n                        }}\r\n                        validationSchema={this.schema}\r\n                    >\r\n                        {({ values, isSubmitting, handleChange, handleBlur, handleSubmit }) => (\r\n                            <Form>\r\n                                <Paper>\r\n                                    <div>\r\n                                        <MyTextField\r\n                                            placeholder=\"Nom d'entreprise\"\r\n                                            name=\"entreprise\"\r\n                                        />\r\n                                        <MyTextField\r\n                                            placeholder=\"Numéro de compte\"\r\n                                            name=\"no_compte\"\r\n                                        />\r\n                                        <MyTextField\r\n                                            placeholder=\"Nom du client\"\r\n                                            name=\"nom\"\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <MyTextField\r\n                                            placeholder=\"Téléphone\"\r\n                                            name=\"telephone\"\r\n                                        />\r\n                                        <MyTextField\r\n                                            placeholder=\"Courriel\"\r\n                                            name=\"courriel\"\r\n                                        />\r\n                                        <MyTextField\r\n                                            placeholder=\"PO du client\"\r\n                                            name=\"po_client\"\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <MyTextField\r\n                                            placeholder=\"*Vendeur\"\r\n                                            name=\"vendeur\"\r\n                                        />\r\n                                        <FormControl className=\"form-item\">\r\n                                            <InputLabel htmlFor=\"attention\">*Attention</InputLabel>\r\n                                            <Field\r\n                                                type=\"select\"\r\n                                                as={Select}\r\n                                                name=\"attention\"\r\n                                            >\r\n                                                <MenuItem value={'alexinlife.exe@gmail.com'}>Alex Lajeunesse</MenuItem>\r\n                                            </Field>\r\n                                        </FormControl>\r\n                                    </div>\r\n                                    <div>\r\n                                        <MyTextField\r\n                                            placeholder=\"Commentaire\"\r\n                                            name=\"commentaire\"\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <Button className=\"form-item\" disabled={isSubmitting} type=\"submit\"><b>Enregistrer</b></Button>\r\n                                    </div>\r\n                                </Paper>\r\n                            </Form>\r\n                        )}\r\n                    </Formik>\r\n                    <CreationProduits />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}